---
title: "Common Snippets"
description: "Reusable Code Snippets for NovaCloud EIP Development"
icon: "recycle"
---

## Docker Commands

### Container Management
```bash
# Start all containers
docker-compose up -d

# Stop all containers
docker-compose down

# View container status
docker-compose ps

# View container logs
docker-compose logs -f [service-name]

# Execute command in container
docker-compose exec [service] [command]

# Rebuild containers
docker-compose build --no-cache
```

### Common Issues
```bash
# View all running processes on port 3000
lsof -i :3000

# Kill process on port 3000
kill -9 [PID]

# Check Docker system resources
docker system df

# Prune unused images
docker system prune -a
```

## PostgreSQL Quick Commands

```bash
# Connect to database
psql -h localhost -U novacloud -d novacloud

# List all tables
\dt

# Export data
pg_dump postgresql://user:pass@localhost/db > backup.sql

# Restore data
psql postgresql://user:pass@localhost/db < backup.sql

# Check database size
SELECT pg_size_pretty(pg_database_size('novacloud'));
```

## Neo4j Cypher Patterns

### Find High-Value Customers
```cypher
MATCH (c:Customer)-[r:PLACED]->(o:Order)
WITH c, COUNT(o) as orders, SUM(o.amount) as total
WHERE total > 10000
RETURN c.name, orders, total
ORDER BY total DESC
```

### Network Analysis
```cypher
MATCH (n)-[r]->(m)
RETURN n, COUNT(r) as connections
ORDER BY connections DESC
LIMIT 10
```

### Shortest Path
```cypher
MATCH p = shortestPath((a:Customer)-[*]-(b:Customer))
WHERE a.id = 'cust1' AND b.id = 'cust2'
RETURN p
```

## Environment Variables Template

```bash
# Database
DATABASE_URL=postgresql://user:password@postgres:5432/novacloud
NEO4J_URI=bolt://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_secure_password

# AI/LLM
OLLAMA_BASE_URL=http://ollama:11434
QDRANT_URL=http://qdrant:6333

# Next.js
NEXT_PUBLIC_API_URL=http://localhost:3000
NODE_ENV=development

# Monitoring
MONITORING_API_PORT=3001

# Supabase
SUPABASE_URL=http://localhost:8000
SUPABASE_ANON_KEY=your_key_here
```

## API Request Examples

### cURL Commands
```bash
# Get all customers
curl -X GET http://localhost:3000/api/customers \
  -H "Authorization: Bearer YOUR_TOKEN"

# Create new customer
curl -X POST http://localhost:3000/api/customers \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"name": "Acme Corp", "email": "contact@acme.com"}'

# Query Neo4j relationships
curl -X POST http://localhost:3000/api/graph/query \
  -H "Content-Type: application/json" \
  -d '{"cypher": "MATCH (c:Customer) RETURN c LIMIT 10"}'

# Semantic search via LangChain
curl -X POST http://localhost:3000/api/search \
  -H "Content-Type: application/json" \
  -d '{"query": "Find orders over $10000", "limit": 5}'
```

## Server Health Check

```bash
# Check all services
echo "=== Container Status ===" && \
docker-compose ps && \
echo "=== Service Health ===" && \
curl http://localhost:3000/health && \
curl http://localhost:11434/api/tags && \
echo "=== System Resources ===" && \
docker stats --no-stream
```

## New Developer Onboarding

```bash
# Clone repository
git clone https://github.com/novatek-dev/novacloud-eip.git
cd novacloud-eip

# Setup environment
cp .env.example .env

# Install dependencies
npm install

# Start development environment
docker-compose up -d

# Initialize database
npm run prisma:migrate

# Start development server
npm run dev

# View documentation
cd ../docs && mint dev
```

## LangChain RAG Integration

### Text Embedding
```typescript
import { OllamaEmbeddings } from '@langchain/community/embeddings/ollama';

const embeddings = new OllamaEmbeddings({
  model: 'mistral',
  baseUrl: 'http://ollama:11434'
});

const vectors = await embeddings.embedDocuments(['text1', 'text2']);
```

### Vector Search
```typescript
import { QdrantVectorStore } from '@langchain/community/vectorstores/qdrant';

const vectorStore = new QdrantVectorStore(embeddings, {
  url: 'http://qdrant:6333',
  collectionName: 'novacloud_embeddings'
});

const results = await vectorStore.similaritySearch('query', 5);
```

## Prisma Common Operations

```typescript
// Find with relations
const customer = await prisma.customer.findUnique({
  where: { id },
  include: { orders: true, invoices: true }
});

// Create with nested data
const order = await prisma.order.create({
  data: {
    customerId: id,
    items: {
      create: [
        { productId: 'p1', quantity: 2 },
        { productId: 'p2', quantity: 1 }
      ]
    }
  }
});

// Update multiple
await prisma.order.updateMany({
  where: { status: 'pending' },
  data: { status: 'processing' }
});

// Delete with cascade
await prisma.customer.delete({
  where: { id }
});
```
